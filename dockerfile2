pipeline{
    agent {label 'docker_slave'}
    stages{
        stage ('checkout_scm'){
            steps{
                checkout scm
            }
        }
        stage ('docker_build'){
            steps{
                sh 'docker build -t praveenbyadagi/newproject:p1 .'
            }
        }
        stage('docker_push'){
            steps{
                withcredentials([strings(credentialId: 'docker-slave', variable: 'docker-slave')]){
                    sh 'docker login -u praveenbyadagi -p ${docker-slave}'
                    sh 'docker push praveenbyadagi/newproject:p1'
                }
            }
        }
    }
}
